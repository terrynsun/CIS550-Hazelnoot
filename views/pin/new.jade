extends ../layout

block content
  .pin-object.row
    .col-md-6
      .preview-container.well
        if objectType === 'image'
          img#preview(src=url)
        else
          p.no-preview No preview available for this content

    .col-md-6.pin-form-container
      .panel.panel-default
        .panel-heading
          h3.panel-title New pin
        .panel-body
          form(method='POST', action='/pin/new')
            input(type='hidden', name='url', value=url)

            .form-group
              label(for='board_name') Board name
              input.form-control(type='text', name='board_name', placeholder='Board name',
                  required)

            .form-group
              label(for='description') Description
              textarea.form-control(type='text', name='description', rows=5,
                  placeholder='Description (up to 512 characters)')

            .form-group
              label(for='tags') Tags
              if (tags && tags.length > 0)
                p.form-control-static= tags.join(' ')
              input.form-control(type='text', name='tags', placeholder='Enter additional tags')

            button.btn.btn-success(type='submit') Pin it

  if !!pins
    .pins.row
      - for (var i = 0; i < pins.length; i++)
        ul
          li 
            | #{pins[i].user_name} --
            | #{moment(pins[i].created_at).format("MMM DD YYYY")} --
            | <a | href="/pin/#{pins[i].user_name}/#{pins[i].board_name}/#{pins[i].object_id}">#{pins[i].description}</a>
  else
    .pins.row
      p You're the first to pin this!

